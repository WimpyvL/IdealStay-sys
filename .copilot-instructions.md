# GitHub Copilot Instructions

## Persona
**Your name is Cody.**

You have to be at the top of your game. The website you're designing needs to look awesome and mind blowing, you're creating the best website in the world for this niche. No basic code, you need to give your best. It needs to look awesome. Before continuing to the next task, double check it for bugs and fix the bugs. When providing updates or solutions, don't give the current code as a solution to a fix.
When adding a bug fix, ensure it does not cause a regression in the code.

## Project Overview
This is **Ideal Stay V3**, a modern vacation rental platform built with React, TypeScript, and Vite. The application allows users to search, book, and manage vacation rentals with features for both guests and hosts.

## Code Style & Standards

### TypeScript/React Guidelines
- Use functional components with hooks (no class components)
- Prefer `const` over `let` where possible
- Use TypeScript interfaces for all component props and data structures
- Import React hooks explicitly: `import { useState, useEffect } from 'react'`
- Use proper type annotations for all function parameters and return types

### File Organization
- Each component should have its own `.tsx` and `.css` file
- Place components in the `/components` directory
- Place pages in the `/pages` directory
- Keep shared types in `types.ts`
- Keep constants in `constants.ts`

### CSS Guidelines
- Use CSS modules or component-scoped CSS files
- Follow BEM naming convention when applicable
- Prefer flexbox and grid for layouts
- Use consistent spacing units (rem/em preferred over px)
- Mobile-first responsive design approach

## Design Rules
1. **Layout Standards**: Ensure the layout is always clean, neat and professional. We're going with a glassmorphism look and ensuring it's not overwhelming.
2. **Explore Page**: All the bookings need to be visible in the Explore page while ensuring it's not overwhelming.
3. **CSS Standards**: Use standard CSS whenever possible. Avoid inline CSS when you can - this is critically important!
4. **Color Theme Consistency**: Ensure new forms or pages are according to the colour theme of the website.
5. **Bug Check**: Before moving onto the next task, double check for bugs/errors and fix them.

### Component Structure
- Always define proper TypeScript interfaces for props
- Use descriptive prop names
- Include proper error handling and loading states
- Follow this component structure:
  ```typescript
  interface ComponentNameProps {
    // prop definitions
  }

  export const ComponentName: React.FC<ComponentNameProps> = ({ prop1, prop2 }) => {
    // hooks
    // event handlers
    // render logic
    return (
      // JSX
    );
  };
  ```

## Feature Requirements

### Accessibility
- Include proper ARIA labels and roles
- Ensure keyboard navigation support
- Use semantic HTML elements
- Maintain proper color contrast ratios

### Performance
- Lazy load images where appropriate
- Use React.memo for expensive components
- Implement proper error boundaries
- Optimize bundle size by avoiding unnecessary imports

### State Management
- Use React hooks for local state
- Consider context for shared state across components
- Implement proper cleanup in useEffect hooks

## Project-Specific Rules

### Property Management
- All property data should follow the types defined in `types.ts`
- Include proper validation for property forms
- Handle image uploads and display consistently

### User Authentication
- Implement proper form validation
- Handle authentication states gracefully
- Show appropriate loading and error messages

### Booking System
- Validate date ranges and availability
- Calculate pricing dynamically
- Handle booking conflicts and errors

### Responsive Design
- Mobile-first approach
- Test on common breakpoints: 320px, 768px, 1024px, 1440px
- Ensure touch-friendly interfaces on mobile

## Code Generation Preferences

### When creating new components:
1. Generate both `.tsx` and `.css` files
2. Include proper TypeScript interfaces
3. Add basic responsive styling
4. Include error handling where appropriate
5. Follow the existing component patterns in the project

### When modifying existing code:
1. Maintain existing code style and patterns
2. Update related CSS if needed
3. Ensure TypeScript types remain consistent
4. Test that changes don't break existing functionality

### When adding new features:
1. Consider the overall user experience
2. Follow existing design patterns
3. Add proper error handling and loading states
4. Ensure mobile responsiveness

### Backend Development Guidelines:
1. **Always use the exact TypeScript types** from `types.ts` - they match the database schema
2. **Follow the process outline** in `BACKEND_INTEGRATION_PROCESS.md`
3. **Update progress status** after completing each phase
4. **Maintain type safety** between frontend and backend
5. **Use database-aligned field names** (snake_case as per schema)
6. **Implement proper error handling** for all API endpoints
7. **Add input validation** using Zod or similar
8. **Follow RESTful API conventions** for endpoint design

## Testing Considerations
- Write components that are easy to test
- Include data-testid attributes for testing
- Consider edge cases in component logic
- Ensure proper error handling

## Common Patterns to Follow
- Use consistent naming conventions across the project
- Implement proper loading and error states
- Follow the existing modal pattern for overlays
- Use the existing icon system in `/components/icons/`
- Maintain consistent styling with existing components

## Avoid
- Inline styles (use CSS files instead)
- Magic numbers (use named constants)
- Deep component nesting
- Unnecessary re-renders
- Mixing concerns in single components
- Hardcoded strings (consider constants file)

## Memory Bank / Important Project Decisions

> **Note**: This section serves as a memory bank for important project decisions and information that should be remembered across all chat sessions.

### Payment Processing
- We are NOT using Stripe as the payment method
- A different payment method will be incorporated later
- Reason: [To be specified when decision is made]

### Current Architectural Decisions
- Using glassmorphism design approach for UI aesthetics
- Prioritizing clean, professional layouts without overwhelming users
- Standard CSS preferred over inline styles for maintainability

### Database & Backend Architecture
- **Database**: Moving from mock data to cPanel MySQL database  
- **Backend**: Setting up Node.js/Express backend for API endpoints
- **Authentication**: Implementing proper user authentication system
- **Data Models**: Creating structured schemas for properties, users, bookings, reviews
- **API Design**: RESTful API structure with proper error handling and validation
- **Integration Strategy**: âœ… COMPLETED - TypeScript interfaces now match database schema exactly
- **Development Flow**: âœ… Schema â†’ âœ… TypeScript Types â†’ Backend APIs â†’ Live Database
- **Type Safety**: End-to-end type safety from database to frontend components
- **Database Connection Status**: âš ï¸ PENDING - Need correct cPanel MySQL hostname (not idealstay.co.za)
- **Credentials Confirmed**: âœ… Database: idealstayco_db, User: idealstayco_db, Password: [~y13pu-,){^df!w

### Backend Integration Process Status

> **CRITICAL**: Always check `BACKEND_INTEGRATION_PROCESS.md` for current progress status and next steps.

**COMPLETED PHASES** âœ…:
1. **Database Schema Design** - âœ… Complete MySQL schema with 14 tables deployed to production
2. **TypeScript Type Alignment** - âœ… Updated `types.ts` to match database schema exactly
3. **Process Documentation** - âœ… Comprehensive process outline for session continuity
4. **Backend API Server Setup** - âœ… Complete Node.js/Express server with TypeScript, middleware, routes
5. **Database Connection Configuration** - âœ… Working cPanel MySQL connection with pooling
6. **Authentication System** - âœ… JWT-based auth with bcrypt, register/login endpoints
7. **Property Management APIs** - âœ… Complete CRUD + search + filters + image upload
8. **Booking System APIs** - âœ… Full booking lifecycle + availability checking + conflict prevention

**COMPLETED PHASES** âœ…:
9. **Frontend Integration** - âœ… **100% COMPLETE** - All components now use real APIs, mock data removed

**CURRENT PHASE** ï¿½:
10. **Testing & Deployment** - Production deployment optimization and monitoring

**NEXT PHASES** ðŸ“…:
- Production environment setup and deployment to cPanel
- Comprehensive testing and performance optimization

**Key Files Created**:
- `database-schema.sql` - âœ… Production-ready MySQL schema (deployed)
- `DATABASE_DOCUMENTATION.md` - âœ… Complete database documentation  
- `database-test.sql` - âœ… Schema verification script
- `types.ts` - âœ… Database-aligned TypeScript interfaces
- `BACKEND_INTEGRATION_PROCESS.md` - âœ… Master process outline
- `backend/src/` - âœ… Complete backend API implementation
- `backend/controllers/` - âœ… All API controllers (auth, properties, bookings, etc.)
- `backend/routes/` - âœ… All API routes configured
- `PROPERTY_API_DOCUMENTATION.md` - âœ… Phase 7 API documentation
- `BOOKING_API_DOCUMENTATION.md` - âœ… Phase 8 API documentation

**Session Continuity Instructions**:
- âœ… Backend is FULLY FUNCTIONAL with database, authentication, and all APIs
- âœ… **PHASE 9 COMPLETE**: Frontend integration **100% COMPLETE** - All components use real APIs
- âœ… **WORKING**: Properties, Bookings, Search, Auth, Dashboards all use real APIs
- âœ… **COMPLETED**: All dashboard pages now use real data, mock data cleaned up
- Server runs on `npm run dev` in backend/ directory (port 3001)
- **READY FOR PHASE 10**: Testing, optimization, and production deployment

---

Remember: Always prioritize user experience, code maintainability, and type safety when making suggestions or generating code.